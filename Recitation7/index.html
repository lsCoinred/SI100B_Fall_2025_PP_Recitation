<!doctype html>
<html lang="en">

<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no" />

  <title>SI100B_Fall_2024_Recitation_7</title>
  <link rel="shortcut icon" href="./favicon.ico" />
  <link rel="stylesheet" href="./dist/reset.css" />
  <link rel="stylesheet" href="./dist/reveal.css" />
  <link rel="stylesheet" href="./dist/theme/simple.css" id="theme" />
  <link rel="stylesheet" href="./css/highlight/github.css" />

  <link rel="stylesheet" href="./_assets/assets/custom.css" />
</head>

<body>
  <div class="reveal">
    <div class="slides">
      <section data-markdown data-separator="<!--s-->" data-separator-vertical="<!--v-->">
        <textarea data-template>
            
<p style="font-size: 16px; color: #999; margin:5px; position: absolute;"><a href="..">Homepage</a> | <a href="?print-pdf">Printable Version</a></p>
<div style="display: flex; justify-content: center; align-items: center; height: 700px;">
  <div style="text-align: center; padding: 40px; background-color: white; border: 2px solid rgb(0, 63, 163); border-radius: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.1);">
    <h1 style="font-size: 48px; font-weight: bold; margin-bottom: 20px; color: #333;">SI100B Fall 2024 Recitation 7</h1>
    <p style="font-size: 24px; color: #666;">Homework 3 & Mid-term Review</p>
    <p style="font-size: 16px; color: #999; margin-top: 20px; margin-bottom:5px">SI100B 2024 Staff | 2025-11-07</p>
  </div>
</div>

<!--s-->



<div class="middle center"><div style="width: 100%">

# Mid-term Exam

</div></div>
<!--v-->

## Mid-term Exam
- 形式：上机测试，OJ评测
- 可以带一张 A4 大小 Cheatsheet
- 三轮考试（分配另行通知）：
  - Nov. 12 (Wednesday) Class 3-4
  - Nov. 14 (Friday) Class 3-4
  - Nov. 14 (Friday) Class 11-12
  - 地点：信息学院机房 3-101、1A-109
- 下周一周二晚上 18:00 到 21:30 开放考场机房熟悉环境

<!--s-->

<div class="middle center"><div style="width: 100%">

# Homework 3

</div></div>

<!--v-->
## Question 1: **Nested List Flattener**
实现一个函数，该函数可以将任意深度的嵌套列表展平为一维列表。

```python
def flatten_nested_list(nested) -> list:
    """
    Flatten a nested list of arbitrary depth into a one-dimensional list.

    Args:
        nested_list (list): A nested list structure that can contain integers, strings, 
                            floats, booleans, or other nested lists

    Returns:
        list: A flattened one-dimensional list whose elements are in the same order 
              as they appear from left to right in the printed original list.
    """
```

<!--v-->
## Question 2: **Sublist Operation**
1. 反转 reverse_sublist
```python
def reverse_sublist(lst, l, r, inplace):
    """
    Reverse the elements in the sublist [l:r] of a list.
    Args:
        lst (list): The input list to be processed.
        l (int): The starting index of the sublist (inclusive).
        r (int): The ending index of the sublist (exclusive).
        inplace (bool): 
            If True, modifies the list in place and returns the same list.  
            If False, returns a new list with the specified sublist reversed.
    Returns:
        list: The list with the specified sublist reversed.
    Raises:
        AssertionError: If l or r is out of range, or if l >= r.
    """
```

<!--v-->
## Question 2: **Sublist Operation**
2. 旋转 rotate_sublist
```python
def rotate_sublist(lst, l, r, k, inplace):
    """
    Rotate the elements in the sublist [l:r] of a list to the left by k positions.
    Args:
        lst (list): The input list to be processed.
        l (int): The starting index of the sublist (inclusive).
        r (int): The ending index of the sublist (exclusive).
        k (int): The number of positions to rotate left. Can be any integer.
        inplace (bool): 
            If True, modifies the list in place and returns the same list.  
            If False, returns a new list with the specified sublist rotated.
    Returns:
        list: The list with the specified sublist rotated left by k positions.
    Raises:
        AssertionError: If l or r is out of range, or if l >= r.
    """
```

<!--v-->
## Question 2: **Sublist Operation**
3. 交换 swap_sublist
```python
def swap_sublist(lst, l1, r1, l2, r2, inplace):
    """
    Swap two sublists [l1:r1] and [l2:r2] of a list.
    Args:
        lst (list): The input list to be processed.
        l1 (int): The starting index of the first sublist (inclusive).
        r1 (int): The ending index of the first sublist (exclusive).
        l2 (int): The starting index of the second sublist (inclusive).
        r2 (int): The ending index of the second sublist (exclusive).
        inplace (bool): 
            If True, modifies the list in place and returns the same list.  
            If False, returns a new list with the specified sublists swapped.
    Returns:
        list: The list with the specified sublists swapped.
    Raises:
        AssertionError: 
            If the sublist indices are out of range, if l1 >= r1 or l2 >= r2,  
            if the two sublists are not of the same length
            or the two sublists overlap.
    """
```
<!--v-->
## Question 3: **Document Keyword**
1. Compute TF (Term Frequency) for each word in a document:
   
$$\text{TF}_{t,d} = \log_{10} \left( \text{count}(t, d) + 1 \right)$$

2. Compute IDF (Inverse Document Frequency) across all documents:
   
$$\text{IDF}_{t} = \log_{10} \left( \dfrac{N}{\text{DF}_{t}}  \right)$$

3. Combine TF and IDF to obtain the TF-IDF score for each word in each document:
   
$$\text{TF-IDF}_{t,d} = \text{TF}_{t,d} \times \text{IDF}_{t} $$

<!--s-->

<div class="middle center"><div style="width: 100%">

# 期中复习

</div></div>
<!--v-->
## 说明
- 此处快速回顾一些知识点，仅用于查漏补缺
- 请以**完整的课件和考试范围**作为复习标准

<!--v--> 
## Recall: 考试范围内的课程内容
- Core Elements of Programs (basic type, I/O, ...)
- Program Flow (branch, loop)
- Iteration, Simple Programs, Simple Algorithms
- Functions, More Functions as Objects, 
  - Keyword Arguments, Default Arguments
- Tuples and Lists
  - List Operations, Mutability
  - Aliasing and Cloning, List Comprehensions
- Exceptions, Assertions, Debugging
- Dictionaries
- Recursion

<!--v-->
## 数值类型
- `int`：整数
- `float`：浮点数，存在一定误差
  - 尽量不使用 `==` 对浮点数做判断！
  - 比较浮点数时可以采用 `abs(a-b) < 1e-10` 这样的写法
    - `1e-10` 是科学计数法表示 $10^{-10}$

<!--v--> 
## Strings
- 字符串单双引号都可以
- 可以使用加法、乘法等，例：`"a"+"b"`, `"a"*3`
- `int()` 可以将字符串转换为数字，例：`int("3")=3`
- `len()` 可以返回字符串的长度
- 可以通过 `s[index]` 来访问某一个字符
- 从前到后 index 从 `0` 开始，反之下标从 `-1` 开始
- 不可变(immutable)类型， 例：`s[0]='1'` 会报错
<!--v--> 

## Slice
- `s[start:stop:step]` 可以获得字符串的子串/子序列等
- `s = "0123456"`, `s[1:3]` 返回 `"12"` ，`s[1:6:2]` 返回 `"135"`
- `s[::-1]` 返回 `"6543210"`
<!--v--> 

## Input/Output
- 使用 `print()` 输出
- `print(a, b, c)` 会使用空格分开
- 使用 `str()` 将别的类型转换成字符串输出，例：`print("ans="+str(ans))`
- `print` 不换行：`print("...", end="")` 
- `temp = input("Input:")`，打印提示文字并读取字符串到 `temp`
  - 注意：OJ 上不要打印额外的提示文字
- 使用 `int()` 等将输入字符串转换成需要的类型
- `print(f'{x} factorial is {factorial}')` 格式化输出，在字符串中插入变量
  - `print(f'{x:.2f}')` 输出小数点后保留两位
<!--v--> 

## 条件语句
- 注意区分赋值符 `=` 和比较运算符 `==`
- `not`, `and`, `or`
- `if...else...`
- `if...elif...`
- `if...elif...else...`
<!--v-->

## 循环与迭代
- `while` 循环：`while condition: ...`，设定正确的条件或者break避免一直循环
- break可以退出当前循环
- `for` 循环：`for variable in sequences: ...`
- `range(start, stop, step)`：生成一个数字的序列（类比切片）
- 经典迭代算法（了解即可）：
  - 二分查找：在一个区间里寻找需要的答案，答案在区间内有单调性
    - 每次根据中点的结果将搜索范围减少一半
  - 牛顿迭代法：近似求平方根以及其它方程的解的方法
<!--v-->

## Function
- `def func(args):` 定义函数，`return` 返回
  - 没有返回值时默认返回 `None`
- 用函数描述自己算法的子过程（面向过程）
- 函数内有自己的作用域，局部变量仅在该函数的作用域中
  - 如果涉及全局变量的修改，要使用 `global` 声明该变量是全局变量
<!--v-->

## 作用域（scope）
- 变量需要先初始化再使用
```python
def sum_odd(a, b): 
	sum_of_odds = 0 # If deleted: UnboundLocalError
	i = a
	while i <= b:
		sum_of_odds += i 
	    i += 1
	return sum_of_odds
```
<!--v-->

## 作用域（scope）
- 函数内的同名变量
```python
x = 5

def test(): 
	x = 1
	print(x)

test()
print(x)
```

<!--v-->

## 高阶函数
- 函数在 Python 也是对象
  - Remember: Everything in Python is an object.
- 函数可以作为参数传递
  - `map(func, ...)`, `sorted(..., key=func)`, ...
- 函数可以返回函数
```python
def make_prod(a):
	def g(b):
		return a*b
	return g
```
  - 调用 `make_prod` 会返回一个函数对象
<!--v-->

## Lambda Functions
例：有一个函数apply接受一个函数和一个数字作为参数：`apply(is_even, 10)`
```python
def is_even(x):
	return x % 2 == 0
```
可以写成：`apply(lambda x: x % 2 == 0, 10)`
<!--v-->

## Tuples
- `tuple` 是一种不可变的类型
- 创建空的 `tuple`：`temp = ()`
- 创建只有一个元素的 `tuple`：`temp = (1,)`
- 同样支持 slice 等操作
- 可以用于交换：`x, y = y, x`
  - 等价于：`(x, y) = (y, x)`
- 函数参数列表中使用 `*args` 依次将所有参数打包成一个元组
<!--v-->

## Lists
- `list` 是一种可变(mutable)的类型
- 同样支持 slice 等操作
- 可以使用 `+` 将两个列表连接
- 可以直接使用 index 修改 `list` 中的某个值
- 用 `for x in L:` 遍历列表元素
  - 可迭代对象：`enumerate(L)`, `zip(L1, L2)`, ...
  - 注意：不要在循环内修改正在迭代的列表！
- 对一个 `list` 使用 `append` 等函数可以直接修改这个 `list`，例：`L.append(5)`
  - `L.reverse()`, `L.sort()`, `L.remove(x)`, `L.pop()`, ...
  - 区分 `L.sort()` 和 `sorted(L)`
  - 区分 `L.remove(x)` 和 `del L[i]`
- `s.split(' ')` 可以根据字符将 `string` 转换成 `list`
- `'_'.join(L)` 可以将 `list` 中每个元素用字符连接，转换成字符串
<!--v-->

## Aliasing, Cloning
- 区分 `L1 = L[:]` (Cloning) 和 `L2 = L` (Aliasing)
```python
L = [1, 2, 3]
L1 = L[:]
L2 = L
L.append(4)
print(L1, L2)
```
- 注意 `new_list = copy.copy(old_list)` 的用法
- 注意 `new_list = copy.deepcopy(old_list)` 的用法
- Remember: Everything in Python is an object.
<!--v-->

## 列表推导式
- 根据原有列表生成新列表
```python
L = [1, 2, 3, 4, 5]
L1 = [e**2 for e in L] # [1, 4, 9, 16, 25] 
L2 = [e**2 for e in L if e%2==1] # [1, 9, 25] 
```
<!--v-->

## Exceptions, Assertions
- 使用 `try...except...else...finally...` 来处理异常
- 可以分别处理不同类型的异常，例：`except TypeError:`
- `finally` 是在异常处理之后总会被执行的语句
- Raise 抛出自定义异常
- Assert 的用法：`assert statement, "message"`
<!--v-->

## Dictionaries
- 一个 key 对应一个 value，key 和 value 都是无序的
- `del(dict[key])` 删除某个元素，dict将会被改变
- `key in dict` 判断是否在字典中
- `dict.keys(), dict.values()`
- `for k, v in dict.items()`
- `dict.copy()` 
- 字典推导式
<!--v-->

## Recursion
- 分析问题，找出问题本身的递归结构
- 注意递归终止条件
- 注意递归过程中传递/改变的参数
- 可以通过模拟递归函数运行来分析
<!--v-->

## Tips
- 认真读题。
  - Thinking Twice, Coding Once. 
- 拷贝对象时（特别是传参），注意区分是 `clone` 还是 `alias` 
- 默认参数如果设置成可变，需要仔细处理
- 自定义函数时不要忘记 `return`
- 写循环的时候注意不要写错列表的 `index`、循环变量等
- 多使用print输出一些值帮助调试（提交的时候记得删）
- 学会阅读报错信息



<!--s-->

<div style="display: flex; justify-content: center; align-items: center; height: 700px;   ">
  <div style="text-align: center; padding: 40px; background-color: white; border-radius: 20px; box-shadow: 0 0 20px rgba(0,0,0,0.1);">
    <div style="display: inline-block; padding: 20px 40px; border-radius: 10 px; margin-bottom: 20px;">
      <h1 style="font-size: 48px; font-weight: bold; margin: 0; color: rgb(16, 33, 89)">Thanks for Listening</h1>
    </div>
    <p style="font-size: 24px; color: #666; margin: 0;">Any questions?</p>
  </div>
</div>
          </textarea>
      </section>
    </div>
  </div>

  <script src="./dist/reveal.js"></script>

  <script src="./mermaid/dist/mermaid.min.js"></script>

  <script src="./plugin/markdown/markdown.js"></script>
  <script src="./plugin/highlight/highlight.js"></script>
  <script src="./plugin/zoom/zoom.js"></script>
  <script src="./plugin/notes/notes.js"></script>
  <script src="./plugin/math/math.js"></script>
  <!-- Font awesome is required for the chalkboard plugin -->
  <script src="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/js/all.min.js"></script>
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
  <!-- Custom controls plugin is used to for opening and closing annotation modes. -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js-plugins@latest/customcontrols/plugin.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-plugins@latest/customcontrols/style.css">
  <!-- Chalkboard plugin -->
  <script src="https://cdn.jsdelivr.net/npm/reveal.js-plugins@latest/chalkboard/plugin.js"></script>
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/reveal.js-plugins@latest/chalkboard/style.css">
  <script>
    function extend() {
      var target = {};
      for (var i = 0; i < arguments.length; i++) {
        var source = arguments[i];
        for (var key in source) {
          if (source.hasOwnProperty(key)) {
            target[key] = source[key];
          }
        }
      }
      return target;
    }

    // default options to init reveal.js
    var defaultOptions = {
      controls: true,
      progress: true,
      history: true,
      center: false,
      width: 1000,
      pdfSeparateFragments: false,
      transition: 'slide',
      transitionSpeed: 'fast',
      slideNumber: "c/t",
      highlight: {
        highlightOnLoad: false
      },
      plugins: [
        RevealMarkdown,
        RevealHighlight,
        RevealZoom,
        RevealNotes,
        RevealMath.KaTeX,
        RevealChalkboard,
        RevealCustomControls,
      ],
      customcontrols: {
        controls: [
          {
            icon: '<i class="fa fa-pen-square"></i>',
            title: 'Toggle chalkboard (B)',
            action: 'RevealChalkboard.toggleChalkboard();'
          },
          {
            icon: '<i class="fa fa-pen"></i>',
            title: 'Toggle notes canvas (C)',
            action: 'RevealChalkboard.toggleNotesCanvas();'
          }
        ]
      },
      chalkboard: {
        // add configuration here
      },
    };

    // options from URL query string
    var queryOptions = Reveal().getQueryHash() || {};

    var options = extend(defaultOptions, {"_":["./materials/Recitation7/Recitation7.md"],"static":"static/Recitation7","template":"./assets/reveal.html","preprocessor":"./assets/preproc.js","scripts":"assets/menu/menu.js,assets/inject.js"}, queryOptions);
  </script>

  <script src="./_assets/assets/menu/menu.js"></script>
  <script src="./_assets/assets/inject.js"></script>

  <script>
    Reveal.initialize(options);
    Reveal.addEventListener('ready', function (event) {
      const blocks = Reveal.getRevealElement().querySelectorAll('pre code:not(.mermaid)');
      const hlp = Reveal.getPlugin('highlight');
      blocks.forEach(hlp.highlightBlock);
    });
  </script>

  <script>
    const mermaidOptions = extend({ startOnLoad: false }, {});
    mermaid.startOnLoad = false;
    mermaid.initialize(mermaidOptions);
    const cb = function (event) {
      mermaid.init(mermaidOptions, '.stack.present > .present pre code.mermaid');
      mermaid.init(mermaidOptions, '.slides > .present:not(.stack) pre code.mermaid');
    }
    Reveal.addEventListener('ready', cb);
    Reveal.addEventListener('slidetransitionend', cb);
  </script>
</body>

</html>